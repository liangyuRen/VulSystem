package com.nju.backend.controller;

import com.nju.backend.config.RespBean;
import com.nju.backend.config.RespBeanEnum;
import com.nju.backend.service.Vulnerability.VulnerabilityService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/vulnerability")
public class VulnerabilityController {

    @Autowired
    private VulnerabilityService vulnerabilityService;

    //采纳/不采纳漏洞建议
    @RequestMapping("/accept")
    public RespBean acceptVulnerabilitySuggestion(@RequestParam("vulnerabilityid") int id,@RequestParam("ifaccept") int isAccept) {
        try {
            vulnerabilityService.acceptVulnerabilitySuggestion(id, isAccept);
            return RespBean.success();
        } catch (Exception e) {
            return RespBean.error(RespBeanEnum.ERROR, e.getMessage());
        }
    }
}
